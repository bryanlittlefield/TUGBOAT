version: "3"
services:
    web:
        env_file:
            - .env
        image: bryanjlittlefield/tugboat-php:${PHP_VERSION}
        volumes:
            - ./var/log/apache2:/var/log/apache2
            # Example of a Host Mounted Volume
            - ./var/www/html:/var/www/html
            # Example of a Named Data Volume
            #- web-data-volume:/var/www/html
        ports:
            - "80:80"
            - "443:443"
            - "1080:1080"
            - "2222:22"
        links:
            - db:mysql
            - redis:redis
            - mailhog:mailhog
        restart: on-failure
    db:
        image: bryanjlittlefield/tugboat-mysql:${MYSQL_VERSION}
        volumes:
            - ./var/lib/mysql:/var/lib/mysql
        ports:
            - 3306:3306
        restart: on-failure
    redis:
        image: redis
        ports:
            - 6379:6379
    mailhog:
        image: mailhog/mailhog
        hostname: mailhog
        ports:
            - "8025:8025"
            - "1025:1025"
volumes:
  web-data-volume:
